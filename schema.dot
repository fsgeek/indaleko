// Indaleko Database Schema
digraph IndalekoDB {
	bgcolor=white compound=true fontname=Arial fontsize=14 nodesep=0.5 rankdir=TB ranksep=0.75
	node [fontname=Arial fontsize=12 height=0.6 margin="0.2,0.1" shape=box style="filled,rounded" width=2.5]
	edge [arrowsize=0.8 fontcolor="#333333" fontname=Arial fontsize=10]
	subgraph cluster_Core_Storage {
		color=gray fontname=Arial fontsize=14 label="Core Storage" labeljust=l style="rounded,dashed"
		Objects [label="Objects\nCore storage for file and object metadata" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		Objects_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		Objects_idx1 -> Objects [arrowhead=none color="#006600" style=dotted]
		SemanticData [label="SemanticData\nSemantic enrichment metadata for objects" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		SemanticData_idx1 [label="unique persistent\n(ObjectIdentifier)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on ObjectIdentifier" width=1.5]
		SemanticData_idx1 -> SemanticData [arrowhead=none color="#006600" style=dotted]
		SemanticData_idx2 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		SemanticData_idx2 -> SemanticData [arrowhead=none color="#006600" style=dotted]
		NamedEntities [label="NamedEntities\nNamed entity storage for identity resolution" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		NamedEntities_idx1 [label="unique persistent\n(name)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on name" width=1.5]
		NamedEntities_idx1 -> NamedEntities [arrowhead=none color="#006600" style=dotted]
		NamedEntities_idx2 [label="unique persistent\n(device_id)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on device_id" width=1.5]
		NamedEntities_idx2 -> NamedEntities [arrowhead=none color="#006600" style=dotted]
		Relationships [label="Relationships\nEdge collection linking related objects" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		Relationships_idx1 [label="edge\n(_from, _to)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Edge index on _from, _to" width=1.5]
		Relationships_idx1 -> Relationships [arrowhead=none color="#006600" style=dotted]
		Relationships_idx2 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		Relationships_idx2 -> Relationships [arrowhead=none color="#006600" style=dotted]
	}
	subgraph cluster_Activity_Context {
		color=gray fontname=Arial fontsize=14 label="Activity Context" labeljust=l style="rounded,dashed"
		ActivityContext [label="ActivityContext\nActivity context data for user actions" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 1673 documents"]
		ActivityContext_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		ActivityContext_idx1 -> ActivityContext [arrowhead=none color="#006600" style=dotted]
		TempActivityContext [label="TempActivityContext\nTemperature-related activity context" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		TempActivityContext_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		TempActivityContext_idx1 -> TempActivityContext [arrowhead=none color="#006600" style=dotted]
		GeoActivityContext [label="GeoActivityContext\nGeographic location activity context" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		GeoActivityContext_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		GeoActivityContext_idx1 -> GeoActivityContext [arrowhead=none color="#006600" style=dotted]
		MusicActivityContext [label="MusicActivityContext\nMusic listening activity context" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		MusicActivityContext_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		MusicActivityContext_idx1 -> MusicActivityContext [arrowhead=none color="#006600" style=dotted]
		"ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e" [label="ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e\nActivity data for a specific provider" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 1673 documents"]
		"ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e_idx1" [label="ttl\n(ttl_timestamp)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Ttl index on ttl_timestamp" width=1.5]
		"ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e_idx1" -> "ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e" [arrowhead=none color="#006600" style=dotted]
		"ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e_idx2" [label="hash\n(Record.Data.timestamp)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Hash index on Record.Data.timestamp" width=1.5]
		"ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e_idx2" -> "ActivityProviderData_0e11f806-97bc-676a-1d18-7841f9e0070e" [arrowhead=none color="#006600" style=dotted]
		"ActivityProviderData_f4dea3b8-5d3e-48ad-9b2c-0e72c9a1b867" [label="ActivityProviderData_f4dea3b8-5d3e-48ad-9b2c-0e72c9a1b867\nActivity data for a specific provider" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		"ActivityProviderData_f4dea3b8-5d3e-48ad-9b2c-0e72c9a1b867_idx1" [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		"ActivityProviderData_f4dea3b8-5d3e-48ad-9b2c-0e72c9a1b867_idx1" -> "ActivityProviderData_f4dea3b8-5d3e-48ad-9b2c-0e72c9a1b867" [arrowhead=none color="#006600" style=dotted]
	}
	subgraph cluster_Entity_Equivalence {
		color=gray fontname=Arial fontsize=14 label="Entity Equivalence" labeljust=l style="rounded,dashed"
		EntityEquivalenceGroups [label="EntityEquivalenceGroups\nGroups of equivalent entity identifiers" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		EntityEquivalenceGroups_idx1 [label="persistent\n(canonical_id)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on canonical_id" width=1.5]
		EntityEquivalenceGroups_idx1 -> EntityEquivalenceGroups [arrowhead=none color="#006600" style=dotted]
		EntityEquivalenceGroups_idx2 [label="persistent\n(entity_type)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on entity_type" width=1.5]
		EntityEquivalenceGroups_idx2 -> EntityEquivalenceGroups [arrowhead=none color="#006600" style=dotted]
		EntityEquivalenceNodes [label="EntityEquivalenceNodes\nIndividual entity equivalence nodes" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		EntityEquivalenceNodes_idx1 [label="persistent\n(name)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on name" width=1.5]
		EntityEquivalenceNodes_idx1 -> EntityEquivalenceNodes [arrowhead=none color="#006600" style=dotted]
		EntityEquivalenceNodes_idx2 [label="persistent\n(entity_type)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on entity_type" width=1.5]
		EntityEquivalenceNodes_idx2 -> EntityEquivalenceNodes [arrowhead=none color="#006600" style=dotted]
		EntityEquivalenceRelations [label="EntityEquivalenceRelations\nRelationships between equivalent entities" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		EntityEquivalenceRelations_idx1 [label="edge\n(_from, _to)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Edge index on _from, _to" width=1.5]
		EntityEquivalenceRelations_idx1 -> EntityEquivalenceRelations [arrowhead=none color="#006600" style=dotted]
		EntityEquivalenceRelations_idx2 [label="persistent\n(source_id)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on source_id" width=1.5]
		EntityEquivalenceRelations_idx2 -> EntityEquivalenceRelations [arrowhead=none color="#006600" style=dotted]
	}
	subgraph cluster_System_Management {
		color=gray fontname=Arial fontsize=14 label="System Management" labeljust=l style="rounded,dashed"
		QueryHistory [label="QueryHistory\nHistory of user queries to the system" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 1 documents"]
		QueryHistory_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		QueryHistory_idx1 -> QueryHistory [arrowhead=none color="#006600" style=dotted]
		ActivityDataProviders [label="ActivityDataProviders\nData providers for activity information" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		ActivityDataProviders_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		ActivityDataProviders_idx1 -> ActivityDataProviders [arrowhead=none color="#006600" style=dotted]
		Services [label="Services\nService definitions and metadata" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 1 documents"]
		Services_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		Services_idx1 -> Services [arrowhead=none color="#006600" style=dotted]
		MachineConfig [label="MachineConfig\nMachine configuration information" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		MachineConfig_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		MachineConfig_idx1 -> MachineConfig [arrowhead=none color="#006600" style=dotted]
		Users [label="Users\nUser information and settings" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		Users_idx1 [label="unique persistent\n(Identifier)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on Identifier" width=1.5]
		Users_idx1 -> Users [arrowhead=none color="#006600" style=dotted]
		Users_idx2 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		Users_idx2 -> Users [arrowhead=none color="#006600" style=dotted]
		IdentityDomains [label="IdentityDomains\nDomain definitions for identities" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		IdentityDomains_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		IdentityDomains_idx1 -> IdentityDomains [arrowhead=none color="#006600" style=dotted]
		CollectionMetadata [label="CollectionMetadata\nMetadata about database collections" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		CollectionMetadata_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		CollectionMetadata_idx1 -> CollectionMetadata [arrowhead=none color="#006600" style=dotted]
	}
	subgraph "cluster_Learning_&_Feedback" {
		color=gray fontname=Arial fontsize=14 label="Learning & Feedback" labeljust=l style="rounded,dashed"
		PerformanceData [label="PerformanceData\nSystem performance measurements" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		PerformanceData_idx1 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		PerformanceData_idx1 -> PerformanceData [arrowhead=none color="#006600" style=dotted]
		FeedbackRecords [label="FeedbackRecords\nUser feedback and ratings" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		FeedbackRecords_idx1 [label="persistent\n(feedback_type)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on feedback_type" width=1.5]
		FeedbackRecords_idx1 -> FeedbackRecords [arrowhead=none color="#006600" style=dotted]
		FeedbackRecords_idx2 [label="persistent\n(timestamp)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on timestamp" width=1.5]
		FeedbackRecords_idx2 -> FeedbackRecords [arrowhead=none color="#006600" style=dotted]
		LearningEvents [label="LearningEvents\nSystem learning event records" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		LearningEvents_idx1 [label="persistent\n(event_type)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on event_type" width=1.5]
		LearningEvents_idx1 -> LearningEvents [arrowhead=none color="#006600" style=dotted]
		LearningEvents_idx2 [label="persistent\n(timestamp)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on timestamp" width=1.5]
		LearningEvents_idx2 -> LearningEvents [arrowhead=none color="#006600" style=dotted]
		KnowledgePatterns [label="KnowledgePatterns\nLearned knowledge patterns" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		KnowledgePatterns_idx1 [label="persistent\n(pattern_type)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on pattern_type" width=1.5]
		KnowledgePatterns_idx1 -> KnowledgePatterns [arrowhead=none color="#006600" style=dotted]
		KnowledgePatterns_idx2 [label="persistent\n(confidence)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on confidence" width=1.5]
		KnowledgePatterns_idx2 -> KnowledgePatterns [arrowhead=none color="#006600" style=dotted]
		ArchivistMemory [label="ArchivistMemory\nArchivist conversation and memory data" color="#003380" fillcolor="#e6eeff" style="filled,rounded" tooltip="Document collection with 0 documents"]
		ArchivistMemory_idx1 [label="persistent\n(Record.Timestamp)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Persistent index on Record.Timestamp" width=1.5]
		ArchivistMemory_idx1 -> ArchivistMemory [arrowhead=none color="#006600" style=dotted]
		ArchivistMemory_idx2 [label="unique primary\n(_key)" color="#006600" fillcolor="#e6ffe6" fontsize=10 height=0.4 shape=box style="filled,rounded" tooltip="Primary index on _key" width=1.5]
		ArchivistMemory_idx2 -> ArchivistMemory [arrowhead=none color="#006600" style=dotted]
	}
	SemanticData -> Objects [label=enriches color="#AA0000" style=dashed tooltip="Semantic data enriches objects"]
	ActivityContext -> Objects [label=contextualizes color="#AA0000" style=dashed tooltip="Activity context provides context for objects"]
	ActivityContext -> TempActivityContext [label=specializes color="#AA0000" style=solid tooltip="Temperature activity extends base activity"]
	ActivityContext -> GeoActivityContext [label=specializes color="#AA0000" style=solid tooltip="Geographic activity extends base activity"]
	ActivityContext -> MusicActivityContext [label=specializes color="#AA0000" style=solid tooltip="Music activity extends base activity"]
	NamedEntities -> EntityEquivalenceGroups [label=groups color="#AA0000" style=solid tooltip="Entities are grouped by equivalence"]
	ActivityDataProviders -> ActivityContext [label=provides color="#AA0000" style=solid tooltip="Providers supply activity context data"]
	QueryHistory -> PerformanceData [label=generates color="#AA0000" style=solid tooltip="Queries generate performance data"]
	QueryHistory -> LearningEvents [label=triggers color="#AA0000" style=solid tooltip="Queries trigger learning events"]
	Users -> IdentityDomains [label="belongs-to" color="#AA0000" style=solid tooltip="Users belong to identity domains"]
	Users -> FeedbackRecords [label=provides color="#AA0000" style=solid tooltip="Users provide feedback records"]
	LearningEvents -> KnowledgePatterns [label=creates color="#AA0000" style=solid tooltip="Learning events create knowledge patterns"]
	ArchivistMemory -> QueryHistory [label=enhances color="#AA0000" style=solid tooltip="Archivist memory enhances query history"]
	subgraph cluster_legend {
		bgcolor="#f5f5f5" color=black fontname=Arial fontsize=12 label=Legend style=rounded
		document_collection [label="Document Collection" color="#003380" fillcolor="#e6eeff" fontsize=10 shape=box style="filled,rounded"]
		edge_collection [label="Edge Collection" color="#800000" fillcolor="#ffe6e6" fontsize=10 shape=box style="filled,rounded"]
		index [label=Index color="#006600" fillcolor="#e6ffe6" fontsize=10 shape=box style="filled,rounded"]
		document_collection -> edge_collection [label=contains color="#AA0000" fontsize=10 style=solid]
		edge_collection -> index [label=references color="#AA0000" fontsize=10 style=dashed]
		rank=sink
	}
}
